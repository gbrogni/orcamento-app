<div class="form">
  <div class="select">
    <mat-form-field class="pick" appearance="fill">
      <mat-label>Escolha um ano</mat-label>
      <mat-select [(ngModel)]="data.AnoConsult" name="data">
        <mat-option *ngFor="let ano of Anos" [value]="ano.anoValue"> {{ano.anoViewValue}} </mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-raised-button (click)="calcular()" (click)="Visible()" color="primary">
      Calcular
    </button>
    <button mat-raised-button (click)="consultar()" color="primary">
      Consultar
    </button>
    <mat-checkbox class="check" (change)="ocultaVenda()">Ocultar venda</mat-checkbox>
    <mat-checkbox class="check" (change)="ocultaCusto()">Ocultar custo</mat-checkbox>
    <div *ngIf="visible">
      <label class="label">Count distinct</label>
      <input matInput class="input" type="text" [value]="count" disabled>
    </div>
  </div>
  <div class="table">
    <table mat-table id="tabela" [dataSource]="orcamentos" class="mat-elevation-z4">

      <!-- Position Column -->
      <ng-container matColumnDef="codProduto">
        <th mat-header-cell *matHeaderCellDef> Cod. produto </th>
        <td mat-cell *matCellDef="let row"> {{row.codProduto}} </td>
        <td mat-footer-cell *matFooterCellDef> Total </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="nomeProduto">
        <th mat-header-cell *matHeaderCellDef> Nome </th>
        <td mat-cell *matCellDef="let row"> {{row.nomeProduto}} </td>
        <td mat-footer-cell *matFooterCellDef>  </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoUni">
        <th mat-header-cell *matHeaderCellDef> Custo uni. </th>
        <td mat-cell *matCellDef="let row"> {{row.custoUni || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{mediaCustoUnitario() || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaJaneiro">
        <th mat-header-cell *matHeaderCellDef> Venda jan. </th>
        <td mat-cell *matCellDef="let row"> {{row.Janeiro?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaJan || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoJaneiro">
        <th mat-header-cell *matHeaderCellDef> Custo jan. </th>
        <td mat-cell *matCellDef="let row"> {{row.Janeiro?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoJan || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaFevereiro">
        <th mat-header-cell *matHeaderCellDef> Venda fev.</th>
        <td mat-cell *matCellDef="let row"> {{row.Fevereiro?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaFev || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoFevereiro">
        <th mat-header-cell *matHeaderCellDef> Custo Fev. </th>
        <td mat-cell *matCellDef="let row"> {{row.Fevereiro?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoFev || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaMarço">
        <th mat-header-cell *matHeaderCellDef> Venda Mar. </th>
        <td mat-cell *matCellDef="let row"> {{row.Marco?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaMar || "0" | currency: 'BRL'}} </td>
      </ng-container>


      <!-- Weight Column -->
      <ng-container matColumnDef="custoMarço">
        <th mat-header-cell *matHeaderCellDef> Custo mar. </th>
        <td mat-cell *matCellDef="let row"> {{row.Marco?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoMar || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaAbril">
        <th mat-header-cell *matHeaderCellDef> Venda abr. </th>
        <td mat-cell *matCellDef="let row"> {{row.Abril?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaAbr || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoAbril">
        <th mat-header-cell *matHeaderCellDef> Custo abr. </th>
        <td mat-cell *matCellDef="let row"> {{row.Abril?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoAbr || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaMaio">
        <th mat-header-cell *matHeaderCellDef> Venda maio </th>
        <td mat-cell *matCellDef="let row"> {{row.Maio?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaMai || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoMaio">
        <th mat-header-cell *matHeaderCellDef> Custo maio </th>
        <td mat-cell *matCellDef="let row"> {{row.Maio?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoMai || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaJunho">
        <th mat-header-cell *matHeaderCellDef> Venda jun. </th>
        <td mat-cell *matCellDef="let row"> {{row.Junho?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaJun || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoJunho">
        <th mat-header-cell *matHeaderCellDef> Custo jun.</th>
        <td mat-cell *matCellDef="let row"> {{row.Junho?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoJun || "0" | currency: 'BRL'}} </td>
      </ng-container>


      <!-- Weight Column -->
      <ng-container matColumnDef="vendaJulho">
        <th mat-header-cell *matHeaderCellDef> Venda jul. </th>
        <td mat-cell *matCellDef="let row"> {{row.Julho?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaJul || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoJulho">
        <th mat-header-cell *matHeaderCellDef> Custo jul. </th>
        <td mat-cell *matCellDef="let row"> {{row.Julho?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoJul || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaAgosto">
        <th mat-header-cell *matHeaderCellDef> Venda ago. </th>
        <td mat-cell *matCellDef="let row"> {{row.Agosto?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaAgo || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoAgosto">
        <th mat-header-cell *matHeaderCellDef> Custo ago. </th>
        <td mat-cell *matCellDef="let row"> {{row.Agosto?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoAgo || "0" | currency: 'BRL'}} </td>
      </ng-container>


      <!-- Weight Column -->
      <ng-container matColumnDef="vendaSetembro">
        <th mat-header-cell *matHeaderCellDef> Venda set. </th>
        <td mat-cell *matCellDef="let row"> {{row.Setembro?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaSet || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoSetembro">
        <th mat-header-cell *matHeaderCellDef> Custo set. </th>
        <td mat-cell *matCellDef="let row"> {{row.Setembro?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoSet || "0" | currency: 'BRL'}} </td>
      </ng-container>


      <!-- Weight Column -->
      <ng-container matColumnDef="vendaOutubro">
        <th mat-header-cell *matHeaderCellDef> Venda out. </th>
        <td mat-cell *matCellDef="let row"> {{row.Outubro?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaOut || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoOutubro">
        <th mat-header-cell *matHeaderCellDef> Custo out. </th>
        <td mat-cell *matCellDef="let row"> {{row.Outubro?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoOut || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaNovembro">
        <th mat-header-cell *matHeaderCellDef> Venda nov. </th>
        <td mat-cell *matCellDef="let row"> {{row.Novembro?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaNov || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoNovembro">
        <th mat-header-cell *matHeaderCellDef> Custo nov. </th>
        <td mat-cell *matCellDef="let row"> {{row.Novembro?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoNov || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="vendaDezembro">
        <th mat-header-cell *matHeaderCellDef> Venda dez. </th>
        <td mat-cell *matCellDef="let row"> {{row.Dezembro?.valorVenda || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaDez || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="custoDezembro">
        <th mat-header-cell *matHeaderCellDef> Custo dez. </th>
        <td mat-cell *matCellDef="let row"> {{row.Dezembro?.custoTotal || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custoDez || "0" | currency: 'BRL'}} </td>
      </ng-container>


      <ng-container matColumnDef="valorVenda">
        <th mat-header-cell *matHeaderCellDef> Valor venda </th>
        <td mat-cell *matCellDef="let row" class="handle" [ngClass]="{'hidden' : hidden}"> {{row.soma?.somavendas | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{somaTotal || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <ng-container matColumnDef="custoTotal">
        <th mat-header-cell *matHeaderCellDef> Custo total </th>
        <td mat-cell *matCellDef="let row" class="handle" [ngClass]="{'hiddenn' : hiddenn}"> {{row.soma?.somaCustos || "0" | currency: 'BRL'}} </td>
        <td mat-footer-cell *matFooterCellDef> {{custosTotal || "0" | currency: 'BRL'}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
    </table>
  </div>
</div>